\documentclass[main]{subfiles} 


\graphicspath{{img/}}


\begin{document}

\section{Implementation}
The whole project can be found in a repository on Github.
There the README will provide the necessary information regarding the implementation of the
scraper as well as how to use the interface.
All of the files were written and run in python version $3.9.12$.
Below a list of all the packages plus their respective versions that were used can be found.

\begin{itemize}
    \item \pkg[Scrapy] -  version $2.6.1$
    \item \pkg[Selenium] - version $4.1.5$
    \item \pkg[Webdriver\_manager] - version $3.5.4$
    \item \pkg[Numpy] -  version $1.22.3$
    \item \pkg[Pandas]  - version $1.4.2$
    \item \pkg[Time]
    \item \pkg[Datetime]
    \item \pkg[Openpyxl] - version $3.0.9$
    \item \pkg[Tk (tkinter)] - version $0.1.0$
    \item \pkg[Pillow] - version $9.1.1$
\end{itemize}

\subsection{Structure of the project}

\begin{forest}
  for tree={
    font=\ttfamily,
    grow'=0,
    child anchor=west,
    parent anchor=south,
    anchor=west,
    calign=first,
    edge path={
      \noexpand\path [draw, \forestoption{edge}]
      (!u.south west) +(7.5pt,0) |- node[fill,inner sep=1.25pt] {} (.child anchor)\forestoption{edge label};
    },
    before typesetting nodes={
      if n=1
        {insert before={[,phantom]}}
        {}
    },
    fit=band,
    before computing xy={l=15pt},
  }
[UNIL-Advanced-Programming-Project-2022
    [comparis\_webscraper
        [comparis\_webscraper
            [spiders
                [comparis\_scraper.py]
                [property\_code\_scraper.py]
            ]
            [items.py]
            [middlewares.py]
            [pipelines.py]
            [settings.py]
        ]
        [scrapy.cfg]
    ]
    [data
        [database.xlsx]
        [property\_codes.csv]
        [property\_details.csv]
    ]
    [Heatmap]
    [GUI
        [cleaning\_database.py]
        [zoes\_version\_1.py]
        [zoes\_version\_2.py]
        [zoes\_version\_3.py]
        [zoes\_version\_4.py]
        [zoes\_version\_5.py]
        [zoes\_version\_5\_final.py]
        [zoes\_version\_6\_really-final.py]
        [zoes\_version\_6-getting-there.py]
        [zoes\_version\_7.py]
    ]
    [README.md]
    [Makefile]
    [.gitignore]
]
\end{forest}

\subsection{Implementation of the web scraping}
As mentioned previously, the web scraping was done by utilizing two different tools, \pkg[Scrapy] and \pkg[Selenium].



\subsection{Implementation of the \ac{gui}}

\subsubsection{Organizing the scraped data}
The first step to building the \ac{gui} is organizing the data that we obtain from the web scraping.
We first analyze the dataset and then clean it for the GUI to function correctly.
This is done in the program cleaning\_database.py which we also use to do the data analysis in our parallel project. \par
In this cleaning program, we first load the dataset. 
Then we print the headings and the description to check the data and the types.
We remove variables that are misspelled, incorrect or missing. 
We then proceed to split the address from the zip code, to get the zip code in a separate column. 
We do this as we want to be able to search properties within a certain zip code. 
Finally we save the dataset. This dataset is the one that the GUI will use to return information to the user.

\subsubsection{Building the \ac{gui}}

\begin{tikzpicture}[auto, node distance = 4mm and 6mm, start chain = going below]
    \begin{scope}[nodes={on chain, join=by line}]
        \node[startstop] (start) {Start};
        \node[input] (in1) {Load Scraped data};
        \node[decision] (dec1) {Is Data Cleaned?};
        \node[input] (in2) {Start GUI by importing tkinter};
        \node[process] (pro2a) {link to cleaned dataset};
        \node[process] (pro2) {Format main window};
        \node[process] (pro3) {Format frames as tabs};
        \node[process] (pro4b) {Create functions for each tab};
        \node[process] (pro5) {Define main loop};
        \node[decision] (dec2) {Check GUI is working};
        \node[input] (in3) {User can serch properties};
        \node[decision] (dec4) {End the program};
        \node[startstop] (start1) {End};
        %%%%%%%%%%%%%
    \end{scope}
    \begin{scope}
        \node[process, left=of dec1] (pro1) {Clean and Organize data};
        \node[process, left=of dec2] (pro6) {Find bug};
        \node[process, left=of dec4] (pro7) {Re-run the program};
        \draw [->] (dec1) |- (pro1); %{No} missing
        \draw [->] (dec2) |-  (pro6); %{No} missing
        \draw [->] (dec4) |-   (pro7); %{No} missing
        \draw [->] (pro1) |- (pro2);
        \draw [->] (pro6) |-  (in2);
        \draw [->] (pro7) |-  (in3);
    \end{scope}
\end{tikzpicture}

\subsection{Maps?}

\end{document}